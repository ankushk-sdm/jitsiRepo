"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useAnalyticsEvents = void 0;
var tslib_1 = require("tslib");
var react_1 = require("react");
var use_memo_one_1 = require("use-memo-one");
var AnalyticsReactContext_1 = require("./AnalyticsReactContext");
var UIAnalyticsEvent_1 = tslib_1.__importDefault(require("./UIAnalyticsEvent"));
function useAnalyticsEvents() {
    var analyticsContext = react_1.useContext(AnalyticsReactContext_1.AnalyticsReactContext);
    var contextRef = react_1.useRef(analyticsContext);
    react_1.useEffect(function () {
        contextRef.current = analyticsContext;
    }, [analyticsContext]);
    var createAnalyticsEvent = use_memo_one_1.useCallbackOne(function (payload) {
        var current = contextRef.current;
        var context = current.getAtlaskitAnalyticsContext
            ? current.getAtlaskitAnalyticsContext()
            : [];
        var handlers = current.getAtlaskitAnalyticsEventHandlers
            ? current.getAtlaskitAnalyticsEventHandlers()
            : [];
        return new UIAnalyticsEvent_1.default({
            context: context,
            handlers: handlers,
            payload: payload,
        });
    }, []);
    return {
        createAnalyticsEvent: createAnalyticsEvent,
    };
}
exports.useAnalyticsEvents = useAnalyticsEvents;
//# sourceMappingURL=useAnalyticsEvents.js.map